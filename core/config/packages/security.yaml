security:
    providers:
        core_user_provider:
            id: App\Infrastructure\Security\CoreUserProvider
    firewalls:
        dev:
            pattern: ^/(_profiler|_wdt|assets|build)/
            security: false

        # ðŸ”¹ Firewall principal para rutas con sesiÃ³n
        main:
            lazy: true
            stateless: false   # permite manejar sesiÃ³n Symfony
            entry_point: null
            provider: core_user_provider
            logout:
                path: /logout
                invalidate_session: true
                clear_site_data: true

        # ðŸ”¹ Firewall API: token validado manualmente
        api:
            pattern: ^/api
            stateless: true    # no usamos sesiÃ³n
            security: false    # todo se valida manualmente en controlador
    
    access_control:
        - { path: ^/productos, methods: [POST, PUT, DELETE], roles: ROLE_ADMIN }
        - { path: ^/productos, roles: PUBLIC_ACCESS }
        #- { path: ^/usuarios, methods: [POST, PUT, DELETE], roles: ROLE_ADMIN }
