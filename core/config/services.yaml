parameters:
    auth_base_url: '%env(AUTH_BASE_URL)%'
    auth_service_name: '%env(CORE_SERVICE_NAME)%'
    auth_service_secret: '%env(CORE_SERVICE_SECRET)%'
    jwt_public_key: '%env(resolve:JWT_PUBLIC_KEY)%'
    
services:
    _defaults:
        autowire: true
        autoconfigure: true

    App\:
        resource: '../src/'

    # üîê Proveedor de token de servicio (Core ‚Üí Auth)
    App\Infrastructure\Security\AuthServiceTokenProvider:
        arguments:
            $authBaseUrl: '%auth_base_url%'
            $serviceName: '%auth_service_name%'
            $serviceSecret: '%auth_service_secret%'

    # üîç Verificador de JWT
    App\Infrastructure\Security\TokenVerifierService:
        arguments:
            $publicKeyPath: '%jwt_public_key%'
    
    App\UI\Http\Web\Controller\UserController:
        arguments:
            $authBaseUrl: '%auth_base_url%'

    App\UI\Http\EventSubscriber\:
        resource: '../src/UI/Http/EventSubscriber'
        tags: ['kernel.event_subscriber']